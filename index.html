<!DOCTYPE html>
<html>
<head>
  <title>raw.caaby.com</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .container {
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .input-field {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .button {
      width: 30%;
      padding: 10px;
      background-color: #8d9e8e;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      display: inline-block;
    }
    .button:hover {
      background-color: #45a049;
    }
    #display-area {
      height: 100%;
    }
    #copy-button {
        position: relative;
        left: 65%;
    }
    #copy-button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div class="container">
    <input type="text" class="input-field" id="key" placeholder="Enter key">
    <input type="text" class="input-field" id="value" placeholder="Enter value">
    <button class="button" onclick="convertUrl()">转换</button>
    <div id="display-area">
    </div>
  </div>
  <script>
    function convertUrl() {
        const key = document.getElementById("key").value;
        const value = document.getElementById("value").value;
        const url = `https://raw.caaby.com/${key}`;
        
        fetch(url, {
            method: "PUT",
            headers: {"Content-Type": "text/plain"},
            body: value
            })
        .then(response => response.text())
        .then(data => {
            console.log(data);
           
            let myDiv = document.getElementById("display-area");
		    // 创建一个文本节点
		    let textNode = document.createTextNode(data);
		    // 将文本节点添加为 div 的子元素
		    myDiv.appendChild(textNode);
		    // 创建一个 button 元素
		    let copyBtn = document.createElement("button");
		    // 添加一个文本节点到 button 元素
		    let buttonTextNode = document.createTextNode("copy");
		    copyBtn.appendChild(buttonTextNode);

            // 为 button 元素添加 id 属性
            copyBtn.setAttribute("id", "copy-button");

            copyBtn.addEventListener("click", () => {
                const success = navigator.clipboard.writeText(data);
                let tooltip = document.createElement("div");
                tooltip.textContent = "复制成功";
                tooltip.style.position = "fixed";
                tooltip.style.top = "50%";
                tooltip.style.left = "50%";
                tooltip.style.transform = "translate(-50%, -50%)";
                tooltip.style.padding = "10px";
                tooltip.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
                tooltip.style.color = "#fff";
                tooltip.style.zIndex = "9999";
                if (success) {
                    tooltip.textContent = "复制成功";
                    // alert("复制成功");
                } else {
                    tooltip.textContent = "复制成功";
                }
                // 将提示元素添加到body中
                document.body.appendChild(tooltip);
                // 2秒后销毁提示元素
                setTimeout(function() {
                    tooltip.parentNode.removeChild(tooltip);
                    }, 2000);
                }
                );
            // 将 button 元素添加为 div 的子元素
		    myDiv.appendChild(copyBtn);
            })
    .catch(error => {
        console.log(error)
        document.getElementById("display-area").innerHTML = "请求失败";
    });
}
  </script>
</body>
</html>
